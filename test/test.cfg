process CaloTest  = {

	service = MessageLogger	{
		untracked vstring destinations = {"cout"} 
		untracked vstring categories = { "KillSecondaries", "EcalSim", "HcalSim", "SaveSimTrack"}
		untracked vstring debugModules = { "*" }
		untracked PSet cout = { untracked string threshold = "INFO"
			untracked PSet default = { untracked int32 limit = 0 }  # kill all messages in the log
			untracked PSet KillSecondaries = { untracked int32 limit = -1 } # except *all* of FwkJob's
			untracked PSet EcalSim = { untracked int32 limit = -1 }
			untracked PSet HcalSim = { untracked int32 limit = -1 }
			untracked PSet SaveSimTrack = { untracked int32 limit = -1 }
		}
		untracked vstring fwkJobReports = {"FrameworkJobReport_HB.xml"}
	}

	include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

	source = FlatRandomEGunSource  {
		untracked int32 maxEvents = 20
		untracked PSet PGunParameters =   {
			# you can request more than 1 particle
			#untracked vint32  PartID = {211,11}
			untracked vint32 PartID = {211}
			untracked double MinEta = -3.5
			untracked double MaxEta =  3.5
			untracked double MinPhi = -3.14159265358979323846 # in radians
			untracked double MaxPhi =  3.14159265358979323846
			untracked double MinE   =  9.99
			untracked double MaxE   = 10.01
		}
		untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
	}

        service = Timing {}

	service = RandomNumberGeneratorService {
		untracked uint32 sourceSeed = 135799753
		PSet moduleSeeds =
		{
			untracked uint32 VtxSmeared = 123456789
			untracked uint32 g4SimHits = 9876
		}
	}

	include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
	replace VtxSmeared.SigmaX = 0.00001
	replace VtxSmeared.SigmaY = 0.00001
	replace VtxSmeared.SigmaZ = 0.00001

	#Magnetic Field 		
        include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

	#Geometry
	include "SimG4Core/KillSecondaries/test/testGeometryXML.cfi"

	module USER = PoolOutputModule {untracked string fileName ="simevent_HB.root"} 
	
	include "SimG4Core/Application/data/SimG4Object.cfi"
	replace common_heavy_suppression.SuppressHeavy = true
	replace g4SimHits.UseMagneticField = false
	replace g4SimHits.Physics.type = "SimG4Core/Physics/QGSP_EMV"
	replace g4SimHits.Watchers = {
                    {string type              = "KillSecondariesTrackAction"
                     using common_heavy_suppression
		    }
                }

	path p1 = { VtxSmeared, g4SimHits }
	endpath outpath = { USER }

}		
